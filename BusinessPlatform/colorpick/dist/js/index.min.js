"use strict";function createColorSelector(){var e=document.querySelector(".colorselector-bg"),t=e.getContext("2d");t.beginPath();for(var o=t.createLinearGradient(0,0,0,e.height),n=0;n<361;n++)o.addColorStop(n/360,"hsl("+(360-n)+", 100%, 50%)");t.fillStyle=o,t.fillRect(0,0,e.width,e.height),t.closePath()}var EventUtil=function(){var e=document.addEventListener?function(e,t,o){e.addEventListener(t,o,!1)}:function(e,t,o){e.attachEvent("on"+t,o)},t=document.removeEventListener?function(e,t,o){e.removeEventListener(t,o,!1)}:function(e,t,o){e.detachEvent("on"+t,o)},o=function(e,t,o,n){var r=function(){return function(e){e=e||window.event;var o=e.target||e.srcElement;if(o.tagName.toLowerCase()===t.toLowerCase())return n.apply(o,arguments)}}();this.on(e,o,r)};return{on:e,remove:t,delegate:o}}();!function(e,t){var o=function(e){var t;for(t in e)return!1;return!0},n=function(){var e,t=arguments,n=t.length,r=t[0],l=t[1],a=!(!t[n-1]||"boolean"!=typeof t[n-1])&&t[n-1],u={},c=function(e){return"[object Array]"===Object.prototype.toString.call(e)};if(0==n||"object"!=typeof t[0]||o(l)||c(t[0]))return r;for(e in r)if(r.hasOwnProperty(e))if(a)for(var i in l)l.hasOwnProperty(i)&&e==i&&(r[e]=l[i]);else{u[e]=r[e];for(var h in l)l.hasOwnProperty(h)&&(e==h?u[e]=l[h]:u[h]=l[h])}return a?r:u},r=function(t){var o,r,l,a={target:".drag",parent:".drag-area",horizontal:!0,vertical:!0,callback:null},u=n(a,t),c=document.querySelector(u.target),i=document.querySelector(u.parent),h=u.callback,s=u.horizontal,d=u.vertical,f=i.clientWidth,v=i.clientHeight,g=i.offsetLeft,m=i.offsetTop,y=c.offsetWidth,b=c.offsetHeight;o=function(){EventUtil.on(document,"mousemove",r)},r=function(t){t=t?t:e.event;var o=0,n=0;s&&(o=Math.min(Math.max(t.clientX-g-y/2,-y/2),f-y/2),c.style.left=o+"px"),d&&(n=Math.min(Math.max(t.clientY-m-b/2,-b/2),v-b/2),c.style.top=n+"px"),h&&h.call(this,{x:o+y/2,y:n+b/2,w:f,h:v})},l=function(){EventUtil.remove(document,"mousemove",r)},EventUtil.on(c,"mousedown",o),EventUtil.on(document,"mouseup",l)};e.drag=r}(window),window.onload=function(){var e=document.querySelector(".colorpicker"),t=document.querySelector(".drag-1"),o=document.querySelector(".drag-2"),n=document.querySelector(".colorselector"),r=document.querySelector(".colorfield"),l=document.querySelector(".colorshow"),a=document.getElementById("R"),u=document.getElementById("G"),c=document.getElementById("B"),i=document.getElementById("H"),h=document.getElementById("S"),s=document.getElementById("L"),d=document.getElementById("hex"),f=Color("hsb(0, 100%, 100%)");createColorSelector();var v=function(e){a.value=Math.round(255*e.rgb.red),u.value=Math.round(255*e.rgb.green),c.value=Math.round(255*e.rgb.blue),i.value=Math.round(360*e.hsl.hue),h.value=Math.round(100*e.hsl.saturation),s.value=Math.round(100*e.hsl.lightness),d.value=e.hex,l.style.backgroundColor=e.hex},g=function(e){var l=e.hsb.hue/360,a=e.hsb.saturation,u=e.hsb.brightness;t.style.left=r.clientWidth*a-6+"px",t.style.top=r.clientHeight*(1-u)-6+"px",o.style.top=n.clientHeight*(1-l)-6+"px",r.style.backgroundColor="hsl("+Math.round(360*e.hsl.hue)+", 100%, 50%)"};drag({target:".drag-1",parent:".colorfield",callback:function(e){f=Color("hsb("+Math.round(f.hsb.hue)+","+Math.round(100*e.x/e.w)+"%,"+Math.round(100*(e.h-e.y)/e.h)+"%)"),v(f)}}),drag({target:".drag-2",parent:".colorselector",horizontal:!1,callback:function(e){f=Color("hsb("+Math.round(360*(e.h-e.y)/e.h)+","+Math.round(100*f.hsb.saturation)+"%,"+Math.round(100*f.hsb.brightness)+"%)"),v(f),r.style.backgroundColor="hsl("+Math.round(360*f.hsl.hue)+", 100%, 50%)"}}),EventUtil.on(r,"click",function(e){var o=e.clientX-this.offsetLeft,n=e.clientY-this.offsetTop;t.style.left=o-t.offsetWidth/2+"px",t.style.top=n-t.offsetHeight/2+"px",f=Color("hsb("+Math.round(f.hsb.hue)+","+Math.round(100*o/r.clientWidth)+"%,"+Math.round(100*(r.clientHeight-n)/r.clientHeight)+"%)"),v(f)}),EventUtil.on(n,"click",function(e){var t=e.clientY-this.offsetTop;o.style.top=t-o.offsetHeight/2+"px",f=Color("hsb("+Math.round(360*(this.clientHeight-t)/this.clientHeight)+","+Math.round(100*f.hsb.saturation)+"%,"+Math.round(100*f.hsb.brightness)+"%)"),v(f),r.style.backgroundColor="hsl("+Math.round(360*f.hsl.hue)+", 100%, 50%)"}),EventUtil.delegate(e,"input","change",function(){var e=this.parentNode.className;switch(e){case"rgb":f=Color("rgb("+a.value+","+u.value+","+c.value+")");break;case"hsl":f=Color("hsl("+i.value+","+h.value+","+s.value+")");break;case"hex":f=Color("#"+d.value)}v(f),g(f)})};