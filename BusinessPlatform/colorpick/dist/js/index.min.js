"use strict";function createColorSelector(){var e=document.querySelector(".colorselector-bg"),t=e.getContext("2d");t.beginPath();for(var n=t.createLinearGradient(0,0,0,e.height),o=0;o<361;o++)n.addColorStop(o/360,"hsl("+(360-o)+", 100%, 50%)");t.fillStyle=n,t.fillRect(0,0,300,300),t.closePath()}function addEvent(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}function removeEvent(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)}function delegateEvent(e,t,n,o){var r=function(){return function(e){e=e||window.event;var n=e.target||e.srcElement;if(n.tagName.toLowerCase()===t.toLowerCase())return o.call(n,arguments)}}();addEvent(e,n,r)}function drag(e,t,n){var o=t.clientWidth,r=t.clientHeight,l=t.offsetLeft,a=t.offsetTop,u=e.offsetWidth,h=e.offsetHeight,c=function(t){t=t?t:window.event;var c=Math.min(Math.max(t.clientX-l-u/2,-u/2),o-u/2),i=Math.min(Math.max(t.clientY-a-h/2,-h/2),r-h/2);e.style.left=c+"px",e.style.top=i+"px",n&&n(c+u/2,i+h/2)},i=function(){addEvent(document,"mousemove",c)},d=function(){removeEvent(document,"mousemove",c)};addEvent(e,"mousedown",i),addEvent(document,"mouseup",d)}var buttonHandler=function(){};window.onload=function(){var e=document.querySelector(".colorpicker"),t=document.querySelectorAll(".drag")[0],n=document.querySelectorAll(".drag")[1],o=document.querySelector(".colorselector"),r=document.querySelector(".colorfield"),l=document.querySelector(".colorshow"),a=document.getElementById("R"),u=document.getElementById("G"),h=document.getElementById("B"),c=document.getElementById("H"),i=document.getElementById("S"),d=document.getElementById("L"),s=document.getElementById("hex"),f=Color("hsb(0, 100%, 100%)");createColorSelector();var v=function(e){a.value=Math.round(255*e.rgb.red),u.value=Math.round(255*e.rgb.green),h.value=Math.round(255*e.rgb.blue),c.value=Math.round(360*e.hsl.hue),i.value=Math.round(100*e.hsl.saturation),d.value=Math.round(100*e.hsl.lightness),s.value=e.hex,l.style.backgroundColor=e.hex},g=function(e){var l=e.hsb.hue/360,a=e.hsb.saturation,u=e.hsb.brightness;t.style.left=r.clientWidth*a-6+"px",t.style.top=r.clientHeight*(1-u)-6+"px",n.style.top=o.clientHeight*(1-l)-6+"px",r.style.backgroundColor="hsl("+Math.round(360*e.hsl.hue)+", 100%, 50%)"};drag(t,r,function(e,t){f=Color("hsb("+Math.round(f.hsb.hue)+","+Math.round(100*e/r.clientWidth)+"%,"+Math.round(100*(r.clientHeight-t)/r.clientHeight)+"%)"),v(f)}),drag(n,o,function(e,t){f=Color("hsb("+Math.round(360*(o.clientHeight-t)/o.clientHeight)+","+Math.round(100*f.hsb.saturation)+"%,"+Math.round(100*f.hsb.brightness)+"%)"),v(f),r.style.backgroundColor="hsl("+Math.round(360*f.hsl.hue)+", 100%, 50%)"}),addEvent(r,"click",function(e){var n=e.clientX-this.offsetLeft,o=e.clientY-this.offsetTop;t.style.left=n-t.offsetWidth/2+"px",t.style.top=o-t.offsetHeight/2+"px",f=Color("hsb("+Math.round(f.hsb.hue)+","+Math.round(100*n/r.clientWidth)+"%,"+Math.round(100*(r.clientHeight-o)/r.clientHeight)+"%)"),v(f)}),addEvent(o,"click",function(e){var t=e.clientX-this.offsetLeft,o=e.clientY-this.offsetTop;n.style.left=t-n.offsetWidth/2+"px",n.style.top=o-n.offsetHeight/2+"px",f=Color("hsb("+Math.round(360*(this.clientHeight-o)/this.clientHeight)+","+Math.round(100*f.hsb.saturation)+"%,"+Math.round(100*f.hsb.brightness)+"%)"),v(f),r.style.backgroundColor="hsl("+Math.round(360*f.hsl.hue)+", 100%, 50%)"}),document.ondragstart=function(){return!1},delegateEvent(e,"input","change",function(){var e=this.parentNode.className;switch(e){case"rgb":f=Color("rgb("+a.value+","+u.value+","+h.value+")"),v(f),g(f);break;case"hsl":f=Color("hsl("+c.value+","+i.value+","+d.value+")"),v(f),g(f);break;case"hex":f=Color("#"+s.value),v(f),g(f)}})};